# get_waveform

音声から波形データを Int 型の配列で取得するためのテスト。  
取得までの工程を理解することで、同様の処理を多言語に応用することを最終的な目標とする。

## 大まかな処理の流れ

### 1. wav へ変換する

変換には ffmpeg を用いる。  
以下のコマンドによって、対象の音声形式を WAV へと変換し、結果（バイナリ）を標準出力する。

```shell
ffmpeg -i input -f wav -
```

### 2. 各チャンクの分離

WAV は RIFF 形式となっているため、WAV ファイル全体が RIFF チャンクとなっている。  
RIFF チャンク内には、実際の波形のデータを含むデータチャンクだけでなく、サンプリングレートやチャンネル数などといった情報を含むフォーマットチャンクも存在する。  
そのため、純粋な波形のデータを取得するためには、これらを分離する必要がある。

### 3. バイナリ配列から Int 型の配列に変換

得られた波形データを Int 型配列に変換するには、元データのビット深度を把握する必要がある。  
ビット深度とは 1 サンプルあたりの情報量を示す単位であり、音声ファイルの場合、一般的には 16bit が最も多く用いられる（ただし、ハイレゾ音源や音楽制作に置ける 2mix ファイル等はその限りではない）。

ビット深度はフォーマットチャンクから取得できるため、あとはその単位ごとにバイナリ配列を区切り、Int 型に変換して配列化することで目的は達せられる。
